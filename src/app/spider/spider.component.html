<h1 class="ml-4">Spider</h1>

<div id="button-bar">
  <div class="mr-4" *ngIf="spider.Status != 'Playing'">
    <form [formGroup]="suitForm" class="inline-block mr-4">
      <label for="suits">Suits</label>
      <select name="suits" formControlName="suits">
        <option *ngFor="let s of suitCounts" [value]="s">{{ s }}</option>
      </select>
    </form>
    <button (click)="deal()">Deal</button>
  </div>
  <div class="mr-4" *ngIf="spider.Status == 'Playing'">
    <button (click)="quit()">Quit</button>
  </div>
  <div class="mr-4">
    <strong>Status</strong>
    {{ spider.Status || "N/A" }}
  </div>
  <div class="mr-4">
    <strong>Moves</strong>
    {{ moves }}
  </div>
  <div class="mr-4">
    <strong>Time</strong>
    {{ clock.formatted() }}
  </div>
  <button routerLink="/spider/scores">Scores</button>
</div>

<div class="spider-top-row">
  <div id="stock" class="card-container">
    <app-playing-card
      *ngFor="let card of stock; let i = index"
      [card]="card"
      level="0"
      index="{{ i }}"
      from="stock"
      (clicked)="stockClicked($event)"
    ></app-playing-card>
  </div>
  <div class="spider-aces">
    <div id="aces-0" class="card-container">
      <app-playing-card
        *ngFor="let card of aces[0]; let i = index"
        [card]="card"
        level="0"
        index="{{ i }}"
        from="aces-0"
      ></app-playing-card>
    </div>
    <div id="aces-1" class="card-container">
      <app-playing-card
        *ngFor="let card of aces[1]; let i = index"
        [card]="card"
        level="0"
        index="{{ i }}"
        from="aces-1"
      ></app-playing-card>
    </div>
    <div id="aces-2" class="card-container">
      <app-playing-card
        *ngFor="let card of aces[2]; let i = index"
        [card]="card"
        level="0"
        index="{{ i }}"
        from="aces-2"
      ></app-playing-card>
    </div>
    <div id="aces-3" class="card-container">
      <app-playing-card
        *ngFor="let card of aces[3]; let i = index"
        [card]="card"
        level="0"
        index="{{ i }}"
        from="aces-3"
      ></app-playing-card>
    </div>
    <div id="aces-4" class="card-container">
      <app-playing-card
        *ngFor="let card of aces[4]; let i = index"
        [card]="card"
        level="0"
        index="{{ i }}"
        from="aces-4"
      ></app-playing-card>
    </div>
    <div id="aces-5" class="card-container">
      <app-playing-card
        *ngFor="let card of aces[5]; let i = index"
        [card]="card"
        level="0"
        index="{{ i }}"
        from="aces-5"
      ></app-playing-card>
    </div>
    <div id="aces-6" class="card-container">
      <app-playing-card
        *ngFor="let card of aces[6]; let i = index"
        [card]="card"
        level="0"
        index="{{ i }}"
        from="aces-6"
      ></app-playing-card>
    </div>
    <div id="aces-7" class="card-container">
      <app-playing-card
        *ngFor="let card of aces[7]; let i = index"
        [card]="card"
        level="0"
        index="{{ i }}"
        from="aces-7"
      ></app-playing-card>
    </div>
  </div>
</div>

<div class="tableau-cells">
  <div
    id="tableau-0"
    class="card-container"
    (dragover)="dragOver($event)"
    (dragenter)="dragEnter($event)"
    (drop)="drop($event)"
  >
    <app-playing-card
      *ngFor="let card of tableau[0]; let i = index"
      [card]="card"
      level="{{ i }}"
      index="{{ i }}"
      from="tableau-0"
      (dragged)="dragStart($event)"
    ></app-playing-card>
  </div>
  <div
    id="tableau-1"
    class="card-container"
    (dragover)="dragOver($event)"
    (dragenter)="dragEnter($event)"
    (drop)="drop($event)"
  >
    <app-playing-card
      *ngFor="let card of tableau[1]; let i = index"
      [card]="card"
      level="{{ i }}"
      index="{{ i }}"
      from="tableau-1"
      (dragged)="dragStart($event)"
    ></app-playing-card>
  </div>
  <div
    id="tableau-2"
    class="card-container"
    (dragover)="dragOver($event)"
    (dragenter)="dragEnter($event)"
    (drop)="drop($event)"
  >
    <app-playing-card
      *ngFor="let card of tableau[2]; let i = index"
      [card]="card"
      level="{{ i }}"
      index="{{ i }}"
      from="tableau-2"
      (dragged)="dragStart($event)"
    ></app-playing-card>
  </div>
  <div
    id="tableau-3"
    class="card-container"
    (dragover)="dragOver($event)"
    (dragenter)="dragEnter($event)"
    (drop)="drop($event)"
  >
    <app-playing-card
      *ngFor="let card of tableau[3]; let i = index"
      [card]="card"
      level="{{ i }}"
      index="{{ i }}"
      from="tableau-3"
      (dragged)="dragStart($event)"
    ></app-playing-card>
  </div>
  <div
    id="tableau-4"
    class="card-container"
    (dragover)="dragOver($event)"
    (dragenter)="dragEnter($event)"
    (drop)="drop($event)"
  >
    <app-playing-card
      *ngFor="let card of tableau[4]; let i = index"
      [card]="card"
      level="{{ i }}"
      index="{{ i }}"
      from="tableau-4"
      (dragged)="dragStart($event)"
    ></app-playing-card>
  </div>
  <div
    id="tableau-5"
    class="card-container"
    (dragover)="dragOver($event)"
    (dragenter)="dragEnter($event)"
    (drop)="drop($event)"
  >
    <app-playing-card
      *ngFor="let card of tableau[5]; let i = index"
      [card]="card"
      level="{{ i }}"
      index="{{ i }}"
      from="tableau-5"
      (dragged)="dragStart($event)"
    ></app-playing-card>
  </div>
  <div
    id="tableau-6"
    class="card-container"
    (dragover)="dragOver($event)"
    (dragenter)="dragEnter($event)"
    (drop)="drop($event)"
  >
    <app-playing-card
      *ngFor="let card of tableau[6]; let i = index"
      [card]="card"
      level="{{ i }}"
      index="{{ i }}"
      from="tableau-6"
      (dragged)="dragStart($event)"
    ></app-playing-card>
  </div>
  <div
    id="tableau-7"
    class="card-container"
    (dragover)="dragOver($event)"
    (dragenter)="dragEnter($event)"
    (drop)="drop($event)"
  >
    <app-playing-card
      *ngFor="let card of tableau[7]; let i = index"
      [card]="card"
      level="{{ i }}"
      index="{{ i }}"
      from="tableau-7"
      (dragged)="dragStart($event)"
    ></app-playing-card>
  </div>
  <div
    id="tableau-8"
    class="card-container"
    (dragover)="dragOver($event)"
    (dragenter)="dragEnter($event)"
    (drop)="drop($event)"
  >
    <app-playing-card
      *ngFor="let card of tableau[8]; let i = index"
      [card]="card"
      level="{{ i }}"
      index="{{ i }}"
      from="tableau-8"
      (dragged)="dragStart($event)"
    ></app-playing-card>
  </div>
  <div
    id="tableau-9"
    class="card-container"
    (dragover)="dragOver($event)"
    (dragenter)="dragEnter($event)"
    (drop)="drop($event)"
  >
    <app-playing-card
      *ngFor="let card of tableau[9]; let i = index"
      [card]="card"
      level="{{ i }}"
      index="{{ i }}"
      from="tableau-9"
      (dragged)="dragStart($event)"
    ></app-playing-card>
  </div>
</div>
